{"version":3,"file":"DpsDXEMR.js","sources":["../src/components/menu/zoomer.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { computed, defineAsyncComponent, onMounted } from \"vue\";\r\n\r\nconst Button = defineAsyncComponent(() => import(\"../button/index.vue\"));\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    scale: number;\r\n    scales?: Array<{\r\n      value?: number | string;\r\n      show: boolean;\r\n      label?: string;\r\n    }>;\r\n    disabled?: boolean;\r\n  }>(),\r\n  {\r\n    scale: 1,\r\n    scales: () => [\r\n      { value: 0.25, show: true },\r\n      { value: 0.333, show: false },\r\n      { value: 0.5, show: true },\r\n      { value: 0.584, show: false },\r\n      { value: 0.667, show: false },\r\n      { value: 0.75, show: true },\r\n      { value: 1, show: true },\r\n      { value: 1.25, show: true },\r\n      { value: 1.5, show: true },\r\n      { value: 2, show: true },\r\n      { value: 4, show: true },\r\n      { value: 8, show: true },\r\n      { show: true },\r\n      { label: \"Fit Page\", value: \"fit\", show: true },\r\n      { label: \"Fit Width\", value: \"width\", show: true },\r\n      { label: \"Fit Height\", value: \"height\", show: true },\r\n    ],\r\n  }\r\n);\r\n\r\nconst emit = defineEmits([\"update:scale\", \"fitPage\"]);\r\n\r\nconst _scales = computed(() =>\r\n  props.scales.filter((s) => {\r\n    if (typeof s.value == \"number\") {\r\n      let ss = +s.value;\r\n      return s !== null && !isNaN(ss) && ss > 0;\r\n    }\r\n    return false;\r\n  })\r\n);\r\n\r\nconst scaleIndex = computed(() =>\r\n  _scales.value.findIndex((s) => s.value === props.scale)\r\n);\r\n\r\nconst nextScale = () => {\r\n  let i = Math.min(scaleIndex.value + 1, _scales.value.length);\r\n  emit(\"update:scale\", _scales.value[i].value);\r\n};\r\n\r\nconst prevScale = () => {\r\n  let i = Math.max(scaleIndex.value - 1, 0);\r\n  emit(\"update:scale\", _scales.value[i].value);\r\n};\r\n\r\nconst onScaleSelect = (e: Event) => {\r\n  let val = (e.target as HTMLInputElement).value;\r\n  isNaN(+val) ? emit(\"fitPage\", val) : emit(\"update:scale\", +val);\r\n};\r\n\r\ndefineExpose({\r\n  scales: _scales,\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex items-center justify-center gap-0.5 px-2\">\r\n    <Button\r\n      icon=\"zoom_out\"\r\n      class=\"group rounded-lg px-1 py-0.5 text-2xl\"\r\n      :disabled=\"scaleIndex == 0 || disabled\"\r\n      @click=\"prevScale\"\r\n    />\r\n    <Button\r\n      icon=\"zoom_in\"\r\n      class=\"group rounded-lg px-1 py-0.5 text-2xl\"\r\n      :disabled=\"scaleIndex == _scales.length - 1 || disabled\"\r\n      @click=\"nextScale\"\r\n    />\r\n    <label\r\n      for=\"__PDF_SCALE_SELECT__\"\r\n      class=\"group relative hidden max-w-24 rounded-t-md bg-foreground/10 leading-none before:absolute before:inset-x-0 before:top-full before:h-0.5 before:bg-gray-400/25 md:block\"\r\n    >\r\n      <select\r\n        id=\"__PDF_SCALE_SELECT__\"\r\n        class=\"max-w-full bg-transparent text-center leading-none outline-none\"\r\n        :value=\"scale\"\r\n        :disabled=\"disabled\"\r\n        @change=\"onScaleSelect\"\r\n      >\r\n        <template v-if=\"scaleIndex <= -1\">\r\n          <option :value=\"scale\" hidden>\r\n            {{ (scale * 100).toFixed(1).replace(/[.,]0$/, \"\") + \"%\" }}\r\n          </option>\r\n        </template>\r\n        <template v-for=\"s in scales\" :key=\"`${s}`\">\r\n          <option\r\n            :value=\"s.value\"\r\n            :hidden=\"!s.show\"\r\n            :disabled=\"s.value == undefined\"\r\n            class=\"bg-background\"\r\n          >\r\n            {{\r\n              s.label ??\r\n              (typeof s?.value == \"number\"\r\n                ? (s.value * 100).toFixed(1).replace(/[.,]0$/, \"\") + \"%\"\r\n                : \"-------------\")\r\n            }}\r\n          </option>\r\n        </template>\r\n      </select>\r\n    </label>\r\n  </div>\r\n</template>\r\n"],"names":["Button","defineAsyncComponent","props","__props","emit","__emit","_scales","computed","s","ss","scaleIndex","nextScale","i","prevScale","onScaleSelect","val","__expose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,UAAMA,IAASC,EAAqB,MAAM,OAAO,eAAqB,CAAC,GACjEC,IAAQC,GAiCRC,IAAOC,GAEPC,IAAUC;AAAA,MAAS,MACvBL,EAAM,OAAO,OAAO,CAACM,MAAM;AACrB,YAAA,OAAOA,EAAE,SAAS,UAAU;AAC1B,cAAAC,IAAK,CAACD,EAAE;AACZ,iBAAOA,MAAM,QAAQ,CAAC,MAAMC,CAAE,KAAKA,IAAK;AAAA,QAAA;AAEnC,eAAA;AAAA,MACR,CAAA;AAAA,IACH,GAEMC,IAAaH;AAAA,MAAS,MAC1BD,EAAQ,MAAM,UAAU,CAACE,MAAMA,EAAE,UAAUN,EAAM,KAAK;AAAA,IACxD,GAEMS,IAAY,MAAM;AAClB,UAAAC,IAAI,KAAK,IAAIF,EAAW,QAAQ,GAAGJ,EAAQ,MAAM,MAAM;AAC3D,MAAAF,EAAK,gBAAgBE,EAAQ,MAAMM,CAAC,EAAE,KAAK;AAAA,IAC7C,GAEMC,IAAY,MAAM;AACtB,UAAID,IAAI,KAAK,IAAIF,EAAW,QAAQ,GAAG,CAAC;AACxC,MAAAN,EAAK,gBAAgBE,EAAQ,MAAMM,CAAC,EAAE,KAAK;AAAA,IAC7C,GAEME,IAAgB,CAAC,MAAa;AAC9B,UAAAC,IAAO,EAAE,OAA4B;AACnC,YAAA,CAACA,CAAG,IAAIX,EAAK,WAAWW,CAAG,IAAIX,EAAK,gBAAgB,CAACW,CAAG;AAAA,IAChE;AAEa,WAAAC,EAAA;AAAA,MACX,QAAQV;AAAA,IAAA,CACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}