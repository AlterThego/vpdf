{"version":3,"file":"CaTp3xPE.js","sources":["../src/components/menu/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { computed, defineAsyncComponent, ref, PropType } from \"vue\";\r\nconst Button = defineAsyncComponent(() => import(\"../button/index.vue\"));\r\nconst Pager = defineAsyncComponent(() => import(\"./pager.vue\"));\r\nconst Zoomer = defineAsyncComponent(() => import(\"./zoomer.vue\"));\r\n\r\nconst props = defineProps({\r\n  page: { type: Number, default: 1 },\r\n  pages: { type: Number, default: 0 },\r\n  scale: { type: Number, default: 1.0 },\r\n  rotation: {\r\n    type: Number,\r\n    default: 0,\r\n    validator: (val: number) => val % 90 == 0,\r\n  },\r\n  mode: {\r\n    type: String as PropType<\"vertical\" | \"horizontal\">,\r\n    default: \"vertical\",\r\n  },\r\n  sidebar: { type: Boolean, default: false },\r\n  loading: { type: Boolean, default: false },\r\n  disabled: { type: Boolean, default: false },\r\n});\r\n\r\nconst emit = defineEmits([\r\n  \"update:page\",\r\n  \"update:mode\",\r\n  \"update:scale\",\r\n  \"update:sidebar\",\r\n  \"update:rotation\",\r\n  \"fitPage\",\r\n]);\r\n\r\nconst zoomer = ref<typeof Zoomer>();\r\n\r\nconst _scale = computed({\r\n  get: () => props.scale,\r\n  set: (v) => emit(\"update:scale\", v),\r\n});\r\nconst _scales = computed(() => zoomer.value?.scales);\r\nconst _page = computed({\r\n  get: () => props.page,\r\n  set: (v) => emit(\"update:page\", v),\r\n});\r\nconst _sidebar = computed({\r\n  get: () => props.sidebar,\r\n  set: (v) => emit(\"update:sidebar\", v),\r\n});\r\nconst _rotation = computed({\r\n  get: () => props.rotation,\r\n  set: (v) => emit(\"update:rotation\", v),\r\n});\r\n\r\nconst toggleViewMode = () => {\r\n  emit(\"update:mode\", props.mode == \"vertical\" ? \"horizontal\" : \"vertical\");\r\n};\r\n\r\ndefineExpose({\r\n  scales: _scales,\r\n});\r\n\r\nconst rotate = (deg: number) => {\r\n  if (deg % 90 != 0) return;\r\n  const newDeg = (_rotation.value + deg) % 360;\r\n  const constrainedDeg = Math.max(-270, Math.min(270, newDeg));\r\n\r\n  emit(\"update:rotation\", constrainedDeg);\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"relative flex items-center justify-center bg-foreground/5\">\r\n    <slot name=\"prepend\" />\r\n    <div class=\"flex-auto\">\r\n      <div class=\"px-2\">\r\n        <Button\r\n          class=\"rounded-lg px-1 py-0.5 text-2xl\"\r\n          :icon=\"sidebar ? 'menu_open' : 'menu'\"\r\n          :disabled=\"disabled\"\r\n          @click=\"_sidebar = !_sidebar\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"flex flex-auto items-center justify-center divide-x divide-foreground/25 px-3 py-1 *:border-foreground/25 first:*:!border-l last:*:!border-r\"\r\n    >\r\n      <div class=\"px-2\">\r\n        <Button\r\n          class=\"group rounded-lg px-1 py-0.5 text-2xl\"\r\n          :icon=\"mode == 'vertical' ? 'table_rows' : 'view_column'\"\r\n          :disabled=\"disabled\"\r\n          @click=\"toggleViewMode\"\r\n        />\r\n      </div>\r\n      <Pager v-model=\"_page\" :pages=\"pages\" :mode=\"mode\" :disabled=\"disabled\" />\r\n      <Zoomer\r\n        ref=\"zoomer\"\r\n        v-model:scale=\"_scale\"\r\n        :disabled=\"disabled\"\r\n        @fitPage=\"(e) => emit('fitPage', e)\"\r\n      />\r\n      <div class=\"px-2\">\r\n        <Button\r\n          class=\"group rounded-lg px-1 py-0.5 text-2xl\"\r\n          icon=\"rotate_left\"\r\n          :disabled=\"disabled\"\r\n          @click=\"rotate(-90)\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"flex flex-auto items-center justify-end px-3\">\r\n      <span\r\n        v-if=\"loading\"\r\n        class=\"realtive block h-[1em] w-[1em] animate-mltShdSpin overflow-hidden rounded-full -indent-[9999em] text-sm leading-none text-black\"\r\n        style=\"transform: translateZ(0)\"\r\n      />\r\n    </div>\r\n    <slot name=\"append\" />\r\n  </div>\r\n</template>\r\n"],"names":["Button","defineAsyncComponent","Pager","Zoomer","props","__props","emit","__emit","zoomer","ref","_scale","computed","v","_scales","_a","_page","_sidebar","_rotation","toggleViewMode","__expose","rotate","deg","newDeg","constrainedDeg"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,UAAMA,IAASC,EAAqB,MAAM,OAAO,eAAqB,CAAC,GACjEC,IAAQD,EAAqB,MAAM,OAAO,eAAa,CAAC,GACxDE,IAASF,EAAqB,MAAM,OAAO,eAAc,CAAC,GAE1DG,IAAQC,GAkBRC,IAAOC,GASPC,IAASC,EAAmB,GAE5BC,IAASC,EAAS;AAAA,MACtB,KAAK,MAAMP,EAAM;AAAA,MACjB,KAAK,CAACQ,MAAMN,EAAK,gBAAgBM,CAAC;AAAA,IAAA,CACnC,GACKC,IAAUF,EAAS,MAAM;;AAAA,cAAAG,IAAAN,EAAO,UAAP,gBAAAM,EAAc;AAAA,KAAM,GAC7CC,IAAQJ,EAAS;AAAA,MACrB,KAAK,MAAMP,EAAM;AAAA,MACjB,KAAK,CAACQ,MAAMN,EAAK,eAAeM,CAAC;AAAA,IAAA,CAClC,GACKI,IAAWL,EAAS;AAAA,MACxB,KAAK,MAAMP,EAAM;AAAA,MACjB,KAAK,CAACQ,MAAMN,EAAK,kBAAkBM,CAAC;AAAA,IAAA,CACrC,GACKK,IAAYN,EAAS;AAAA,MACzB,KAAK,MAAMP,EAAM;AAAA,MACjB,KAAK,CAACQ,MAAMN,EAAK,mBAAmBM,CAAC;AAAA,IAAA,CACtC,GAEKM,IAAiB,MAAM;AAC3B,MAAAZ,EAAK,eAAeF,EAAM,QAAQ,aAAa,eAAe,UAAU;AAAA,IAC1E;AAEa,IAAAe,EAAA;AAAA,MACX,QAAQN;AAAA,IAAA,CACT;AAEK,UAAAO,IAAS,CAACC,MAAgB;AAExB,YAAAC,KAAUL,EAAU,QAAQI,KAAO,KACnCE,IAAiB,KAAK,IAAI,MAAM,KAAK,IAAI,KAAKD,CAAM,CAAC;AAE3D,MAAAhB,EAAK,mBAAmBiB,CAAc;AAAA,IACxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}